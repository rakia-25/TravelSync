<br><br>
<h1 class="text-center mb-4 fw-bold fs-3">Bienvenue dans votre espace Hôtelier</h1>

<div class="mb-3 text-muted text-center">
  <p><strong>Prestataire :</strong> <%= @provider.type_provider %></p>
  <p><strong>Entreprise  :</strong> <%= @provider.business  %></p>
  <p><strong>Adresse :</strong> <%= @provider.address %></p>
  <p><strong>Telephone :</strong> <%= @current_user.phone %></p>
</div>

<div class="text-center mb-4">
  <%= link_to "Ajouter un hôtel", new_provider_hotel_path, class: "btn btn-primary" %>
</div>

<% if @hotels.any? %>
  <div class="d-flex flex-wrap justify-content-center gap-4">
    <% @hotels.each do |hotel| %>
      <div class="card shadow-sm" style="width: 20rem;">
        <div class="card-body">
          <h5 class="card-title"><%= hotel.name %> (<%= hotel.stars %> étoiles)</h5>
          <h6 class="card-subtitle mb-2 text-muted"><%= hotel.city %></h6>
          <p class="card-text"><%= truncate(hotel.description, length: 100) %></p>

          <% if hotel.images.attached? %>
            <div class="d-flex flex-wrap gap-2 mt-3">
              <% hotel.images.first(3).each do |image| %>
                <div class="position-relative">
                  <%= link_to url_for(image), target: "_blank", rel: "noopener" do %>
                    <%= image_tag image.variant(resize_to_limit: [300, 200]).processed,
                        class: "img-thumbnail rounded shadow-sm",
                        alt: "#{hotel.name} - photo" %>
                  <% end %>
                  <%= button_to "✕", provider_hotel_purge_image_path(id: image.id, hotel_id: hotel.id),
                        method: :delete,
                        data: { confirm: "Voulez-vous supprimer cette image ?" },
                        class: "btn btn-sm btn-danger position-absolute top-0 end-0 m-1 py-0 px-1" %>
                </div>
              <% end %>
            </div>
          <% else %>
            <p class="text-muted fst-italic mt-2">Aucune image disponible</p>
          <% end %>

          <div class="mt-4 d-flex gap-2 justify-content-center">
            <%= link_to "Voir", provider_hotel_path(hotel), class: "btn btn-sm btn-info" %>
            <%= link_to "Modifier", edit_provider_hotel_path(hotel), class: "btn btn-sm btn-warning" %>
            <%= button_to "Supprimer", provider_hotel_path(hotel),
                  method: :delete,
                  data: { confirm: "Supprimer cet hôtel ?" },
                  class: "btn btn-sm btn-danger" %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <p class="text-muted fst-italic text-center">Vous n'avez encore enregistré aucun hôtel.</p>
<% end %>
