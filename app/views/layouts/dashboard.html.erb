<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dashboard - <%= @provider.provider_type.humanize %>
    </title>
    <%= csrf_meta_tags %>
        <%= csp_meta_tag %>

            <%= stylesheet_link_tag "application" , "data-turbo-track" : "reload" %>
                <%= javascript_importmap_tags %>
                    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
                        rel="stylesheet">
</head>

<body class="bg-gray-50">
    <!-- Sidebar -->
    <div class="fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg">
        <div class="flex flex-col h-full">
            <!-- Logo -->
            <div class="flex items-center justify-center h-16 bg-blue-600 text-white">
                <h1 class="text-xl font-bold">Dashboard</h1>
            </div>

            <!-- Navigation -->
            <nav class="flex-1 px-4 py-6 space-y-2">
                <%= link_to provider_dashboard_path,
                    class: "flex items-center px-4 py-2 text-gray-700 rounded-lg hover:bg-gray-100 #{'bg-blue-50 text-blue-600' if current_page?(provider_dashboard_path)}"
                    do %>
                    <i class="fas fa-tachometer-alt mr-3"></i>
                    Dashboard
                    <% end %>

                        <% case @provider.provider_type %>
                            <% when "hotelier" %>
                                <%= link_to hotels_path,
                                    class: "flex items-center px-4 py-2 text-gray-700 rounded-lg hover:bg-gray-100" do
                                    %>
                                    <i class="fas fa-hotel mr-3"></i>
                                    Mes Hôtels
                                    <% end %>
                                        <%= link_to rooms_path,
                                            class: "flex items-center px-4 py-2 text-gray-700 rounded-lg hover:bg-gray-100"
                                            do %>
                                            <i class="fas fa-bed mr-3"></i>
                                            Chambres
                                            <% end %>
                                                <% when "rental_agency" %>
                                                    <%= link_to cars_path,
                                                        class: "flex items-center px-4 py-2 text-gray-700 rounded-lg hover:bg-gray-100"
                                                        do %>
                                                        <i class="fas fa-car mr-3"></i>
                                                        Mes Véhicules
                                                        <% end %>
                                                            <% when "travel_agency" %>
                                                                <%= link_to trips_path,
                                                                    class: "flex items-center px-4 py-2 text-gray-700 rounded-lg hover:bg-gray-100"
                                                                    do %>
                                                                    <i class="fas fa-map-marked-alt mr-3"></i>
                                                                    Mes Voyages
                                                                    <% end %>
                                                                        <% end %>

                                                                            <%= link_to reservations_path,
                                                                                class: "flex items-center px-4 py-2 text-gray-700 rounded-lg hover:bg-gray-100"
                                                                                do %>
                                                                                <i
                                                                                    class="fas fa-calendar-check mr-3"></i>
                                                                                Réservations
                                                                                <% end %>
            </nav>

            <!-- User Menu -->
            <div class="px-4 py-4 border-t">
                <div class="flex items-center">
                    <div class="flex-1">
                        <p class="text-sm font-medium text-gray-900">
                            <%= current_user.name %>
                        </p>
                        <p class="text-xs text-gray-500">
                            <%= @provider.provider_type.humanize %>
                        </p>
                    </div>
                    <%= link_to destroy_user_session_path, method: :delete,
                        class: "ml-3 p-2 text-gray-400 hover:text-gray-600" do %>
                        <i class="fas fa-sign-out-alt"></i>
                        <% end %>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="ml-64">
        <!-- Header -->
        <header class="bg-white shadow">
            <div class="px-6 py-4">
                <div class="flex items-center justify-between">
                    <h1 class="text-2xl font-semibold text-gray-900">
                        Dashboard <%= @provider.provider_type.humanize %>
                    </h1>

                    <!-- Period Filter -->
                    <div class="flex items-center space-x-3">
                        <%= form_with url: provider_dashboard_path, method: :get, local: true,
                            class: "flex items-center space-x-2" do |f| %>
                            <%= f.select :period, options_for_select([ ['Cette semaine', 'week' ], ['Ce mois', 'month'
                                ], ['Cette année', 'year' ] ], params[:period] || 'week' ), {}, {
                                class: "px-3 py-2 border border-gray-300 rounded-md text-sm" ,
                                onchange: "this.form.submit();" } %>
                                <% end %>

                                    <%= link_to export_data_path,
                                        class: "inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700"
                                        do %>
                                        <i class="fas fa-download mr-2"></i>
                                        Exporter
                                        <% end %>
                    </div>
                </div>
            </div>
        </header>

        <!-- Content -->
        <main class="p-6">
            <%= yield %>
        </main>
    </div>
</body>

</html>