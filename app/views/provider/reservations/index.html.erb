<h1 class="text-2xl font-bold mb-6">Réservations reçues</h1>
<% if @reservations.any? %>
  <table class="table-auto w-full border-collapse border border-gray-300">
    <thead>
      <tr class="bg-gray-100">
        <th class="border px-4 py-2">Service</th>
        <th class="border px-4 py-2">Client</th>
        <th class="border px-4 py-2">Période</th>
        <th class="border px-4 py-2">Statut</th>
        <th class="border px-4 py-2">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @reservations.each do |reservation| %>
        <tr>
          <td class="border px-4 py-2">
            <% if reservation.reservable_type == "Room" %>
              Chambre (Hôtel : <%= reservation.reservable.hotel.name %>)
            <% elsif reservation.reservable_type == "Car" %>
              Voiture : <%= reservation.reservable.name %>
            <% elsif reservation.reservable_type == "Trip" %>
              Voyage : <%= reservation.reservable.title %>
            <% end %>
          </td>
          <td class="border px-4 py-2">
            <%= reservation.user.email %>
          </td>
          <td class="border px-4 py-2">
            <%= reservation.start_date %> → <%= reservation.end_date %>
          </td>
          <td class="border px-4 py-2">
            <span class="inline-block px-2 py-1 text-sm rounded 
              <%= reservation.status == "pending" ? "bg-yellow-200 text-yellow-800" : 
                  reservation.status == "confirmed" ? "bg-green-200 text-green-800" : 
                  "bg-red-200 text-red-800" %>">
              <%= reservation.status.capitalize %>
            </span>
          </td>
          <td class="border px-4 py-2">
            <% if reservation.pending? %>
              <%= button_to "Confirmer", provider_reservation_path(reservation, status: "confirmed"),
                  method: :patch, class: "bg-green-600 text-white px-3 py-1 rounded text-sm" %>
              <%= button_to "Rejeter", provider_reservation_path(reservation, status: "rejected"),
                  method: :patch, class: "bg-red-600 text-white px-3 py-1 rounded text-sm" %>
            <% else %>
              <em class="text-gray-500">Action déjà traitée</em>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p class="text-gray-500 italic">Aucune réservation reçue pour le moment.</p>
<% end %>
