<div class="max-w-4xl mx-auto px-4 py-8 bg-white shadow-md rounded-lg">
  <!-- Nom de l'hôtel -->
  <h1 class="text-3xl font-bold text-center text-indigo-700 mb-6">
    <%= @hotel.name %>
  </h1>
  <!-- Infos principales -->
  <div class="text-center text-gray-700 space-y-2 mb-6">
    <p><strong class="text-gray-800">Ville :</strong> <%= @hotel.city %></p>
    <p><strong class="text-gray-800">Adresse :</strong> <%= @hotel.address %></p>
    <p><strong class="text-gray-800">Prestataire :</strong> <%= @hotel.provider.business %></p>
  </div>
  <!-- Galerie d'images -->
  <% if @hotel.images.attached? %>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8">
      <% @hotel.images.each do |image| %>
        <%= image_tag image.variant(resize_to_limit: [500, 300]), class: "rounded-lg shadow" %>
      <% end %>
    </div>
  <% end %>
  <!-- Titre des chambres -->
  <h2 class="text-2xl font-semibold text-gray-800 text-center mb-4 border-b pb-2">
    Chambres disponibles
  </h2>
  <% if @hotel.rooms.any? %>
    <div class="space-y-6">
      <% @rooms.each do |room| %>
        <div class="border rounded-lg p-4 shadow-sm bg-gray-50">
          <div class="flex justify-between items-center">
            <h3 class="text-lg font-bold text-indigo-600"><%= room.type_room %></h3>
            <span class="text-sm text-gray-600"><%= room.beds %> lit(s)</span>
          </div>
          <p class="text-sm text-gray-700 mt-2">
            <strong>Prix :</strong> <%= number_to_currency(room.price, unit: "FCFA ") %><br>
            <strong>Disponible :</strong>
            <% if room.available %>
              <span class="inline-block px-2 py-1 bg-green-100 text-green-700 text-xs rounded">Oui</span>
            <% else %>
              <span class="inline-block px-2 py-1 bg-red-100 text-red-700 text-xs rounded">Non</span>
            <% end %>
          </p>
          <% reservations = room.reservations.where.not(status: "canceled") %>
          <% if room.available? && reservations.any? %>
            <div class="bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 p-3 mt-3 rounded text-sm">
              <p class="font-medium mb-1">Réservée pour :</p>
              <ul class="list-disc list-inside">
                <% reservations.each do |res| %>
                  <li>
                    Du <%= l res.start_date %> au <%= l res.end_date %>
                    <% if res.status == "confirmed" %>
                      <span class="text-green-600">(confirmée)</span>
                    <% else %>
                      <span class="text-gray-500">(en attente)</span>
                    <% end %>
                  </li>
                <% end %>
              </ul>
            </div>
          <% end %>
          <% if room.available? && current_user.customer? %>
            <div class="mt-4 text-right">
              <%= link_to "Réserver cette chambre", new_customer_hotel_room_booking_path(room.hotel, room),
                  class: "bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm transition" %>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-center text-gray-500 italic">Aucune chambre listée pour cet hôtel.</p>
  <% end %>
</div>
